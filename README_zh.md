# EZ_Questioner

欢迎使用EZ_Questioner，这是一个用于自动化发送问题的工具。通过读取CSV文件中的问题列表，并根据配置文件设定的参数，自动将问题提交到指定的API接口，注意：这是一个针对某特定网站的应用，不适用于通用场景。

### 目录结构
- `index.js`: 主程序文件，负责读取配置、解析CSV文件、发送请求等核心逻辑。
- `config.json`: 配置文件，包含API的基础URL、请求头信息、并发数量、问题数量等重要参数。
- `promise_queue.js`: 实现了简单的任务队列和并发控制功能，确保在高并发情况下稳定运行。

### 安装依赖
确保已安装Node.js环境后，在项目根目录下执行以下命令来安装所需的依赖包：
```bash
npm install
```

### 使用说明

#### 配置文件（config.json）
请根据实际情况修改`config.json`文件中的各项参数：

- **baseURL**: API服务的基础地址，请替换为实际的服务地址。
- **headers**: 请求头信息，特别是`Cookie`字段需要填写有效的登录凭证。
- **CLASS_ID**: 课程ID，需从平台获取并正确填写。
- **AGENT**: 代理标识符，默认值通常无需更改。
- **questionPath**: 问题文件路径，默认为当前目录下的`questions.csv`。
- **maxConcurrent**: 最大并发数，设置为`null`表示串行执行；否则请根据服务器性能合理调整此值。**目前设置并发会导致log缺失，如果出现异常建议使用串行执行**
- **questionNum**: 每次运行时随机抽取的问题总数。

#### 准备问题文件
准备一个名为`questions.csv`的文件，放在项目根目录下。该文件应包含两列数据，第一列为序号（可选），第二列为具体问题内容。例如：
```
1,为什么天空是蓝色的？
2,太阳为什么会发光？
...
```

#### 运行程序
在命令行中进入项目根目录，然后执行以下命令启动程序：
```bash
node index.js
```

### 注意事项
- 确保`config.json`中的所有必填项均已正确配置。
- 当遇到错误时，程序会尝试自动重试一次未成功的请求，之后若仍有失败则*提示*(**仅串行**)用户稍后再试。

### 常见问题解答
- **Q: 如何处理大量问题？**
  A: 可以通过调整`maxConcurrent`参数来提高并发度，但需注意不要给目标服务器造成过大压力。
  
- **Q: 发送过程中出现问题怎么办？**
  A: 程序会在每次发送失败时记录下来，并在最后汇总输出。对于持续失败的情况，建议检查网络连接、API接口状态以及配置文件是否正确。

希望EZ_Questioner能够帮助您高效地完成任务！如果有任何疑问或建议，欢迎线下单杀。
